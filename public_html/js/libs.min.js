!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(jQuery)}(function(S){var i,e=navigator.userAgent,T=/iphone/i.test(e),o=/chrome/i.test(e),E=/android/i.test(e);S.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},S.fn.extend({caret:function(e,t){var n;if(0!==this.length&&!this.is(":hidden")&&this.get(0)===document.activeElement)return"number"==typeof e?(t="number"==typeof t?t:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&((n=this.createTextRange()).collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(n=document.selection.createRange(),e=0-n.duplicate().moveStart("character",-1e5),t=e+n.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(t,y){var n,v,x,b,w,k,C;if(!t&&0<this.length){var e=S(this[0]).data(S.mask.dataName);return e?e():void 0}return y=S.extend({autoclear:S.mask.autoclear,placeholder:S.mask.placeholder,completed:null},y),n=S.mask.definitions,v=[],x=k=t.length,b=null,t=String(t),S.each(t.split(""),function(e,t){"?"==t?(k--,x=e):n[t]?(v.push(new RegExp(n[t])),null===b&&(b=v.length-1),e<x&&(w=v.length-1)):v.push(null)}),this.trigger("unmask").each(function(){var r=S(this),l=S.map(t.split(""),function(e,t){if("?"!=e)return n[e]?d(t):e}),s=l.join(""),a=r.val();function c(){if(y.completed){for(var e=b;e<=w;e++)if(v[e]&&l[e]===d(e))return;y.completed.call(r)}}function d(e){return e<y.placeholder.length?y.placeholder.charAt(e):y.placeholder.charAt(0)}function p(e){for(;++e<k&&!v[e];);return e}function f(e,t){var n,i;if(!(e<0)){for(n=e,i=p(t);n<k;n++)if(v[n]){if(!(i<k&&v[n].test(l[i])))break;l[n]=l[i],l[i]=d(i),i=p(i)}g(),r.caret(Math.max(b,e))}}function h(e){m(),r.val()!=a&&r.change()}function u(e,t){var n;for(n=e;n<t&&n<k;n++)v[n]&&(l[n]=d(n))}function g(){r.val(l.join(""))}function m(e){var t,n,i,o=r.val(),a=-1;for(i=t=0;t<k;t++)if(v[t]){for(l[t]=d(t);i++<o.length;)if(n=o.charAt(i-1),v[t].test(n)){l[t]=n,a=t;break}if(i>o.length){u(t+1,k);break}}else l[t]===o.charAt(i)&&i++,t<x&&(a=t);return e?g():a+1<x?y.autoclear||l.join("")===s?(r.val()&&r.val(""),u(0,k)):g():(g(),r.val(r.val().substring(0,a+1))),x?t:b}r.data(S.mask.dataName,function(){return S.map(l,function(e,t){return v[t]&&e!=d(t)?e:null}).join("")}),r.one("unmask",function(){r.off(".mask").removeData(S.mask.dataName)}).on("focus.mask",function(){var e;r.prop("readonly")||(clearTimeout(i),a=r.val(),e=m(),i=setTimeout(function(){r.get(0)===document.activeElement&&(g(),e==t.replace("?","").length?r.caret(0,e):r.caret(e))},10))}).on("blur.mask",h).on("keydown.mask",function(e){if(!r.prop("readonly")){var t,n,i,o=e.which||e.keyCode;C=r.val(),8===o||46===o||T&&127===o?(n=(t=r.caret()).begin,(i=t.end)-n==0&&(n=46!==o?function(e){for(;0<=--e&&!v[e];);return e}(n):i=p(n-1),i=46===o?p(i):i),u(n,i),f(n,i-1),e.preventDefault()):13===o?h.call(this,e):27===o&&(r.val(a),r.caret(0,m()),e.preventDefault())}}).on("keypress.mask",function(e){if(!r.prop("readonly")){var t,n,i,o=e.which||e.keyCode,a=r.caret();if(!(e.ctrlKey||e.altKey||e.metaKey||o<32)&&o&&13!==o){if(a.end-a.begin!=0&&(u(a.begin,a.end),f(a.begin,a.end-1)),(t=p(a.begin-1))<k&&(n=String.fromCharCode(o),v[t].test(n))){if(function(e){var t,n,i,o;for(n=d(t=e);t<k;t++)if(v[t]){if(i=p(t),o=l[t],l[t]=n,!(i<k&&v[i].test(o)))break;n=o}}(t),l[t]=n,g(),i=p(t),E){setTimeout(function(){S.proxy(S.fn.caret,r,i)()},0)}else r.caret(i);a.begin<=w&&c()}e.preventDefault()}}}).on("input.mask paste.mask",function(){r.prop("readonly")||setTimeout(function(){var e=m(!0);r.caret(e),c()},0)}),o&&E&&r.off("input.mask").on("input.mask",function(e){var t=r.val(),n=r.caret();if(C&&C.length&&C.length>t.length){for(m(!0);0<n.begin&&!v[n.begin-1];)n.begin--;if(0===n.begin)for(;n.begin<b&&!v[n.begin];)n.begin++;r.caret(n.begin,n.begin)}else{m(!0);var i=t.charAt(n.begin);n.begin<k&&(v[n.begin]||n.begin++,v[n.begin].test(i)&&n.begin++),r.caret(n.begin,n.begin)}c()}),m()})}})}),function(o,n,H,f){"use strict";function h(e){return e&&e.hasOwnProperty&&e instanceof H}function u(e){return e&&"string"===H.type(e)}function M(e){return u(e)&&0<e.indexOf("%")}function P(e,t){var n=parseInt(e,10)||0;return t&&M(e)&&(n=I.getViewport()[t]/100*n),Math.ceil(n)}function D(e,t){return P(e,t)+"px"}var a=H("html"),i=H(o),c=H(n),I=H.fancybox=function(){I.open.apply(this,arguments)},r=navigator.userAgent.match(/msie/i),l=null,d=n.createTouch!==f;H.extend(I,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!d,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(r?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>',loading:'<div id="fancybox-loading"><div></div></div>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:H.noop,beforeLoad:H.noop,afterLoad:H.noop,beforeShow:H.noop,afterShow:H.noop,beforeChange:H.noop,beforeClose:H.noop,afterClose:H.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(d,p){if(d&&(H.isPlainObject(p)||(p={}),!1!==I.close(!0)))return H.isArray(d)||(d=h(d)?H(d).get():[d]),H.each(d,function(e,t){var n,i,o,a,r,l,s,c={};"object"===H.type(t)&&(t.nodeType&&(t=H(t)),h(t)?(c={href:t.data("fancybox-href")||t.attr("href"),title:H("<div/>").text(t.data("fancybox-title")||t.attr("title")||"").html(),isDom:!0,element:t},H.metadata&&H.extend(!0,c,t.metadata())):c=t),n=p.href||c.href||(u(t)?t:null),i=p.title!==f?p.title:c.title||"",!(a=(o=p.content||c.content)?"html":p.type||c.type)&&c.isDom&&((a=t.data("fancybox-type"))||(a=(r=t.prop("class").match(/fancybox\.(\w+)/))?r[1]:null)),u(n)&&(a||(I.isImage(n)?a="image":I.isSWF(n)?a="swf":"#"===n.charAt(0)?a="inline":u(t)&&(a="html",o=t)),"ajax"===a&&(n=(l=n.split(/\s+/,2)).shift(),s=l.shift())),o||("inline"===a?n?o=H(u(n)?n.replace(/.*(?=#[^\s]+$)/,""):n):c.isDom&&(o=t):"html"===a?o=n:a||n||!c.isDom||(a="inline",o=t)),H.extend(c,{href:n,type:a,content:o,title:i,selector:s}),d[e]=c}),I.opts=H.extend(!0,{},I.defaults,p),p.keys!==f&&(I.opts.keys=!!p.keys&&H.extend({},I.defaults.keys,p.keys)),I.group=d,I._start(I.opts.index)},cancel:function(){var e=I.coming;e&&!1===I.trigger("onCancel")||(I.hideLoading(),e&&(I.ajaxLoad&&I.ajaxLoad.abort(),I.ajaxLoad=null,I.imgPreload&&(I.imgPreload.onload=I.imgPreload.onerror=null),e.wrap&&e.wrap.stop(!0,!0).trigger("onReset").remove(),I.coming=null,I.current||I._afterZoomOut(e)))},close:function(e){I.cancel(),!1!==I.trigger("beforeClose")&&(I.unbindEvents(),I.isActive&&(I.isOpen&&!0!==e?(I.isOpen=I.isOpened=!1,I.isClosing=!0,H(".fancybox-item, .fancybox-nav").remove(),I.wrap.stop(!0,!0).removeClass("fancybox-opened"),I.transitions[I.current.closeMethod]()):(H(".fancybox-wrap").stop(!0).trigger("onReset").remove(),I._afterZoomOut())))},play:function(e){function t(){clearTimeout(I.player.timer)}function n(){t(),I.current&&I.player.isActive&&(I.player.timer=setTimeout(I.next,I.current.playSpeed))}function i(){t(),c.unbind(".player"),I.player.isActive=!1,I.trigger("onPlayEnd")}!0===e||!I.player.isActive&&!1!==e?I.current&&(I.current.loop||I.current.index<I.group.length-1)&&(I.player.isActive=!0,c.bind({"onCancel.player beforeClose.player":i,"onUpdate.player":n,"beforeLoad.player":t}),n(),I.trigger("onPlayStart")):i()},next:function(e){var t=I.current;t&&(u(e)||(e=t.direction.next),I.jumpto(t.index+1,e,"next"))},prev:function(e){var t=I.current;t&&(u(e)||(e=t.direction.prev),I.jumpto(t.index-1,e,"prev"))},jumpto:function(e,t,n){var i=I.current;i&&(e=P(e),I.direction=t||i.direction[e>=i.index?"next":"prev"],I.router=n||"jumpto",i.loop&&(e<0&&(e=i.group.length+e%i.group.length),e%=i.group.length),i.group[e]!==f&&(I.cancel(),I._start(e)))},reposition:function(e,t){var n,i=I.current,o=i?i.wrap:null;o&&(n=I._getPosition(t),e&&"scroll"===e.type?(delete n.position,o.stop(!0,!0).animate(n,200)):(o.css(n),i.pos=H.extend({},i.dim,n)))},update:function(t){var n=t&&t.originalEvent&&t.originalEvent.type,i=!n||"orientationchange"===n;i&&(clearTimeout(l),l=null),I.isOpen&&!l&&(l=setTimeout(function(){var e=I.current;e&&!I.isClosing&&(I.wrap.removeClass("fancybox-tmp"),(i||"load"===n||"resize"===n&&e.autoResize)&&I._setDimension(),"scroll"===n&&e.canShrink||I.reposition(t),I.trigger("onUpdate"),l=null)},i&&!d?0:300))},toggle:function(e){I.isOpen&&(I.current.fitToView="boolean"===H.type(e)?e:!I.current.fitToView,d&&(I.wrap.removeAttr("style").addClass("fancybox-tmp"),I.trigger("onUpdate")),I.update())},hideLoading:function(){c.unbind(".loading"),H("#fancybox-loading").remove()},showLoading:function(){var e,t;I.hideLoading(),e=H(I.opts.tpl.loading).click(I.cancel).appendTo("body"),c.bind("keydown.loading",function(e){27===(e.which||e.keyCode)&&(e.preventDefault(),I.cancel())}),I.defaults.fixed||(t=I.getViewport(),e.css({position:"absolute",top:.5*t.h+t.y,left:.5*t.w+t.x})),I.trigger("onLoading")},getViewport:function(){var e=I.current&&I.current.locked||!1,t={x:i.scrollLeft(),y:i.scrollTop()};return e&&e.length?(t.w=e[0].clientWidth,t.h=e[0].clientHeight):(t.w=d&&o.innerWidth?o.innerWidth:i.width(),t.h=d&&o.innerHeight?o.innerHeight:i.height()),t},unbindEvents:function(){I.wrap&&h(I.wrap)&&I.wrap.unbind(".fb"),c.unbind(".fb"),i.unbind(".fb")},bindEvents:function(){var t,s=I.current;s&&(i.bind("orientationchange.fb"+(d?"":" resize.fb")+(s.autoCenter&&!s.locked?" scroll.fb":""),I.update),(t=s.keys)&&c.bind("keydown.fb",function(n){var i=n.which||n.keyCode,e=n.target||n.srcElement;if(27===i&&I.coming)return!1;n.ctrlKey||n.altKey||n.shiftKey||n.metaKey||e&&(e.type||H(e).is("[contenteditable]"))||H.each(t,function(e,t){return 1<s.group.length&&t[i]!==f?(I[e](t[i]),n.preventDefault(),!1):-1<H.inArray(i,t)?(I[e](),n.preventDefault(),!1):void 0})}),H.fn.mousewheel&&s.mouseWheel&&I.wrap.bind("mousewheel.fb",function(e,t,n,i){for(var o,a=e.target||null,r=H(a),l=!1;r.length&&!(l||r.is(".fancybox-skin")||r.is(".fancybox-wrap"));)l=(o=r[0])&&!(o.style.overflow&&"hidden"===o.style.overflow)&&(o.clientWidth&&o.scrollWidth>o.clientWidth||o.clientHeight&&o.scrollHeight>o.clientHeight),r=H(r).parent();0===t||l||1<I.group.length&&!s.canShrink&&(0<i||0<n?I.prev(0<i?"down":"left"):(i<0||n<0)&&I.next(i<0?"up":"right"),e.preventDefault())}))},trigger:function(n,e){var t,i=e||I.coming||I.current;if(i){if(H.isFunction(i[n])&&(t=i[n].apply(i,Array.prototype.slice.call(arguments,1))),!1===t)return!1;i.helpers&&H.each(i.helpers,function(e,t){t&&I.helpers[e]&&H.isFunction(I.helpers[e][n])&&I.helpers[e][n](H.extend(!0,{},I.helpers[e].defaults,t),i)})}c.trigger(n)},isImage:function(e){return u(e)&&e.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(e){return u(e)&&e.match(/\.(swf)((\?|#).*)?$/i)},_start:function(e){var t,n,i,o,a,r={};if(e=P(e),!(t=I.group[e]||null))return!1;if(o=(r=H.extend(!0,{},I.opts,t)).margin,a=r.padding,"number"===H.type(o)&&(r.margin=[o,o,o,o]),"number"===H.type(a)&&(r.padding=[a,a,a,a]),r.modal&&H.extend(!0,r,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),r.autoSize&&(r.autoWidth=r.autoHeight=!0),"auto"===r.width&&(r.autoWidth=!0),"auto"===r.height&&(r.autoHeight=!0),r.group=I.group,r.index=e,I.coming=r,!1!==I.trigger("beforeLoad")){if(i=r.type,n=r.href,!i)return I.coming=null,!(!I.current||!I.router||"jumpto"===I.router)&&(I.current.index=e,I[I.router](I.direction));if(I.isActive=!0,"image"!==i&&"swf"!==i||(r.autoHeight=r.autoWidth=!1,r.scrolling="visible"),"image"===i&&(r.aspectRatio=!0),"iframe"===i&&d&&(r.scrolling="scroll"),r.wrap=H(r.tpl.wrap).addClass("fancybox-"+(d?"mobile":"desktop")+" fancybox-type-"+i+" fancybox-tmp "+r.wrapCSS).appendTo(r.parent||"body"),H.extend(r,{skin:H(".fancybox-skin",r.wrap),outer:H(".fancybox-outer",r.wrap),inner:H(".fancybox-inner",r.wrap)}),H.each(["Top","Right","Bottom","Left"],function(e,t){r.skin.css("padding"+t,D(r.padding[e]))}),I.trigger("onReady"),"inline"===i||"html"===i){if(!r.content||!r.content.length)return I._error("content")}else if(!n)return I._error("href");"image"===i?I._loadImage():"ajax"===i?I._loadAjax():"iframe"===i?I._loadIframe():I._afterLoad()}else I.coming=null},_error:function(e){H.extend(I.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:e,content:I.coming.tpl.error}),I._afterLoad()},_loadImage:function(){var e=I.imgPreload=new Image;e.onload=function(){this.onload=this.onerror=null,I.coming.width=this.width/I.opts.pixelRatio,I.coming.height=this.height/I.opts.pixelRatio,I._afterLoad()},e.onerror=function(){this.onload=this.onerror=null,I._error("image")},e.src=I.coming.href,!0!==e.complete&&I.showLoading()},_loadAjax:function(){var n=I.coming;I.showLoading(),I.ajaxLoad=H.ajax(H.extend({},n.ajax,{url:n.href,error:function(e,t){I.coming&&"abort"!==t?I._error("ajax",e):I.hideLoading()},success:function(e,t){"success"===t&&(n.content=e,I._afterLoad())}}))},_loadIframe:function(){var e=I.coming,t=H(e.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",d?"auto":e.iframe.scrolling).attr("src",e.href);H(e.wrap).bind("onReset",function(){try{H(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(e){}}),e.iframe.preload&&(I.showLoading(),t.one("load",function(){H(this).data("ready",1),d||H(this).bind("load.fb",I.update),H(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),I._afterLoad()})),e.content=t.appendTo(e.inner),e.iframe.preload||I._afterLoad()},_preloadImages:function(){var e,t,n=I.group,i=I.current,o=n.length,a=i.preload?Math.min(i.preload,o-1):0;for(t=1;t<=a;t+=1)"image"===(e=n[(i.index+t)%o]).type&&e.href&&((new Image).src=e.href)},_afterLoad:function(){var e,n,t,i,o,a,r=I.coming,l=I.current,s="fancybox-placeholder";if(I.hideLoading(),r&&!1!==I.isActive){if(!1===I.trigger("afterLoad",r,l))return r.wrap.stop(!0).trigger("onReset").remove(),void(I.coming=null);switch(l&&(I.trigger("beforeChange",l),l.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),I.unbindEvents(),n=(e=r).content,t=r.type,i=r.scrolling,H.extend(I,{wrap:e.wrap,skin:e.skin,outer:e.outer,inner:e.inner,current:e,previous:l}),o=e.href,t){case"inline":case"ajax":case"html":e.selector?n=H("<div>").html(n).find(e.selector):h(n)&&(n.data(s)||n.data(s,H('<div class="'+s+'"></div>').insertAfter(n).hide()),n=n.show().detach(),e.wrap.bind("onReset",function(){H(this).find(n).length&&n.hide().replaceAll(n.data(s)).data(s,!1)}));break;case"image":n=e.tpl.image.replace(/\{href\}/g,o);break;case"swf":n='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+o+'"></param>',a="",H.each(e.swf,function(e,t){n+='<param name="'+e+'" value="'+t+'"></param>',a+=" "+e+'="'+t+'"'}),n+='<embed src="'+o+'" type="application/x-shockwave-flash" width="100%" height="100%"'+a+"></embed></object>"}h(n)&&n.parent().is(e.inner)||e.inner.append(n),I.trigger("beforeShow"),e.inner.css("overflow","yes"===i?"scroll":"no"===i?"hidden":i),I._setDimension(),I.reposition(),I.isOpen=!1,I.coming=null,I.bindEvents(),I.isOpened?l.prevMethod&&I.transitions[l.prevMethod]():H(".fancybox-wrap").not(e.wrap).stop(!0).trigger("onReset").remove(),I.transitions[I.isOpened?e.nextMethod:e.openMethod](),I._preloadImages()}},_setDimension:function(){var e,t,n,i,o,a,r,l,s,c,d,p,f,h,u,g,m,y=I.getViewport(),v=0,x=I.wrap,b=I.skin,w=I.inner,k=I.current,C=k.width,S=k.height,T=k.minWidth,E=k.minHeight,O=k.maxWidth,R=k.maxHeight,W=k.scrolling,_=k.scrollOutside?k.scrollbarWidth:0,j=k.margin,A=P(j[1]+j[3]),L=P(j[0]+j[2]);if(x.add(b).add(w).width("auto").height("auto").removeClass("fancybox-tmp"),o=A+(n=P(b.outerWidth(!0)-b.width())),a=L+(i=P(b.outerHeight(!0)-b.height())),r=M(C)?(y.w-o)*P(C)/100:C,l=M(S)?(y.h-a)*P(S)/100:S,"iframe"===k.type){if(g=k.content,k.autoHeight&&1===g.data("ready"))try{g[0].contentWindow.document.location&&(w.width(r).height(9999),m=g.contents().find("body"),_&&m.css("overflow-x","hidden"),l=m.outerHeight(!0))}catch(e){}}else(k.autoWidth||k.autoHeight)&&(w.addClass("fancybox-tmp"),k.autoWidth||w.width(r),k.autoHeight||w.height(l),k.autoWidth&&(r=w.width()),k.autoHeight&&(l=w.height()),w.removeClass("fancybox-tmp"));if(C=P(r),S=P(l),d=r/l,T=P(M(T)?P(T,"w")-o:T),O=P(M(O)?P(O,"w")-o:O),E=P(M(E)?P(E,"h")-a:E),s=O,c=R=P(M(R)?P(R,"h")-a:R),k.fitToView&&(O=Math.min(y.w-o,O),R=Math.min(y.h-a,R)),h=y.w-A,u=y.h-L,k.aspectRatio?(O<C&&(S=P((C=O)/d)),R<S&&(C=P((S=R)*d)),C<T&&(S=P((C=T)/d)),S<E&&(C=P((S=E)*d))):(C=Math.max(T,Math.min(C,O)),k.autoHeight&&"iframe"!==k.type&&(w.width(C),S=w.height()),S=Math.max(E,Math.min(S,R))),k.fitToView)if(w.width(C).height(S),x.width(C+n),p=x.width(),f=x.height(),k.aspectRatio)for(;(h<p||u<f)&&T<C&&E<S&&!(19<v++);)S=Math.max(E,Math.min(R,S-10)),(C=P(S*d))<T&&(S=P((C=T)/d)),O<C&&(S=P((C=O)/d)),w.width(C).height(S),x.width(C+n),p=x.width(),f=x.height();else C=Math.max(T,Math.min(C,C-(p-h))),S=Math.max(E,Math.min(S,S-(f-u)));_&&"auto"===W&&S<l&&C+n+_<h&&(C+=_),w.width(C).height(S),x.width(C+n),p=x.width(),f=x.height(),e=(h<p||u<f)&&T<C&&E<S,t=k.aspectRatio?C<s&&S<c&&C<r&&S<l:(C<s||S<c)&&(C<r||S<l),H.extend(k,{dim:{width:D(p),height:D(f)},origWidth:r,origHeight:l,canShrink:e,canExpand:t,wPadding:n,hPadding:i,wrapSpace:f-b.outerHeight(!0),skinSpace:b.height()-S}),!g&&k.autoHeight&&E<S&&S<R&&!t&&w.height("auto")},_getPosition:function(e){var t=I.current,n=I.getViewport(),i=t.margin,o=I.wrap.width()+i[1]+i[3],a=I.wrap.height()+i[0]+i[2],r={position:"absolute",top:i[0],left:i[3]};return t.autoCenter&&t.fixed&&!e&&a<=n.h&&o<=n.w?r.position="fixed":t.locked||(r.top+=n.y,r.left+=n.x),r.top=D(Math.max(r.top,r.top+(n.h-a)*t.topRatio)),r.left=D(Math.max(r.left,r.left+(n.w-o)*t.leftRatio)),r},_afterZoomIn:function(){var t=I.current;t&&(I.isOpen=I.isOpened=!0,I.wrap.css("overflow","visible").addClass("fancybox-opened").hide().show(0),I.update(),(t.closeClick||t.nextClick&&1<I.group.length)&&I.inner.css("cursor","pointer").bind("click.fb",function(e){H(e.target).is("a")||H(e.target).parent().is("a")||(e.preventDefault(),I[t.closeClick?"close":"next"]())}),t.closeBtn&&H(t.tpl.closeBtn).appendTo(I.skin).bind("click.fb",function(e){e.preventDefault(),I.close()}),t.arrows&&1<I.group.length&&((t.loop||0<t.index)&&H(t.tpl.prev).appendTo(I.outer).bind("click.fb",I.prev),(t.loop||t.index<I.group.length-1)&&H(t.tpl.next).appendTo(I.outer).bind("click.fb",I.next)),I.trigger("afterShow"),t.loop||t.index!==t.group.length-1?I.opts.autoPlay&&!I.player.isActive&&(I.opts.autoPlay=!1,I.play(!0)):I.play(!1))},_afterZoomOut:function(e){e=e||I.current,H(".fancybox-wrap").trigger("onReset").remove(),H.extend(I,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),I.trigger("afterClose",e)}}),I.transitions={getOrigPosition:function(){var e=I.current,t=e.element,n=e.orig,i={},o=50,a=50,r=e.hPadding,l=e.wPadding,s=I.getViewport();return!n&&e.isDom&&t.is(":visible")&&((n=t.find("img:first")).length||(n=t)),h(n)?(i=n.offset(),n.is("img")&&(o=n.outerWidth(),a=n.outerHeight())):(i.top=s.y+(s.h-a)*e.topRatio,i.left=s.x+(s.w-o)*e.leftRatio),"fixed"!==I.wrap.css("position")&&!e.locked||(i.top-=s.y,i.left-=s.x),i={top:D(i.top-r*e.topRatio),left:D(i.left-l*e.leftRatio),width:D(o+l),height:D(a+r)}},step:function(e,t){var n,i,o=t.prop,a=I.current,r=a.wrapSpace,l=a.skinSpace;"width"!==o&&"height"!==o||(n=t.end===t.start?1:(e-t.start)/(t.end-t.start),I.isClosing&&(n=1-n),i=e-("width"===o?a.wPadding:a.hPadding),I.skin[o](P("width"===o?i:i-r*n)),I.inner[o](P("width"===o?i:i-r*n-l*n)))},zoomIn:function(){var e=I.current,t=e.pos,n=e.openEffect,i="elastic"===n,o=H.extend({opacity:1},t);delete o.position,i?(t=this.getOrigPosition(),e.openOpacity&&(t.opacity=.1)):"fade"===n&&(t.opacity=.1),I.wrap.css(t).animate(o,{duration:"none"===n?0:e.openSpeed,easing:e.openEasing,step:i?this.step:null,complete:I._afterZoomIn})},zoomOut:function(){var e=I.current,t=e.closeEffect,n="elastic"===t,i={opacity:.1};n&&(i=this.getOrigPosition(),e.closeOpacity&&(i.opacity=.1)),I.wrap.animate(i,{duration:"none"===t?0:e.closeSpeed,easing:e.closeEasing,step:n?this.step:null,complete:I._afterZoomOut})},changeIn:function(){var e,t=I.current,n=t.nextEffect,i=t.pos,o={opacity:1},a=I.direction;i.opacity=.1,"elastic"===n&&(e="down"===a||"up"===a?"top":"left","down"===a||"right"===a?(i[e]=D(P(i[e])-200),o[e]="+=200px"):(i[e]=D(P(i[e])+200),o[e]="-=200px")),"none"===n?I._afterZoomIn():I.wrap.css(i).animate(o,{duration:t.nextSpeed,easing:t.nextEasing,complete:I._afterZoomIn})},changeOut:function(){var e=I.previous,t=e.prevEffect,n={opacity:.1},i=I.direction;"elastic"===t&&(n["down"===i||"up"===i?"top":"left"]=("up"===i||"left"===i?"-":"+")+"=200px"),e.wrap.animate(n,{duration:"none"===t?0:e.prevSpeed,easing:e.prevEasing,complete:function(){H(this).trigger("onReset").remove()}})}},I.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!d,fixed:!0},overlay:null,fixed:!1,el:H("html"),create:function(e){var t;e=H.extend({},this.defaults,e),this.overlay&&this.close(),t=I.coming?I.coming.parent:e.parent,this.overlay=H('<div class="fancybox-overlay"></div>').appendTo(t&&t.length?t:"body"),this.fixed=!1,e.fixed&&I.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(e){var t=this;e=H.extend({},this.defaults,e),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(e),this.fixed||(i.bind("resize.overlay",H.proxy(this.update,this)),this.update()),e.closeClick&&this.overlay.bind("click.overlay",function(e){if(H(e.target).hasClass("fancybox-overlay"))return I.isActive?I.close():t.close(),!1}),this.overlay.css(e.css).show()},close:function(){i.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&(H(".fancybox-margin").removeClass("fancybox-margin"),this.el.removeClass("fancybox-lock"),i.scrollTop(this.scrollV).scrollLeft(this.scrollH)),H(".fancybox-overlay").remove().hide(),H.extend(this,{overlay:null,fixed:!1})},update:function(){var e,t="100%";this.overlay.width(t).height("100%"),r?(e=Math.max(n.documentElement.offsetWidth,n.body.offsetWidth),c.width()>e&&(t=c.width())):c.width()>i.width()&&(t=c.width()),this.overlay.width(t).height(c.height())},onReady:function(e,t){var n=this.overlay;H(".fancybox-overlay").stop(!0,!0),n||this.create(e),e.locked&&this.fixed&&t.fixed&&(t.locked=this.overlay.append(t.wrap),t.fixed=!1),!0===e.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(e,t){t.locked&&!this.el.hasClass("fancybox-lock")&&(!1!==this.fixPosition&&H("*").filter(function(){return"fixed"===H(this).css("position")&&!H(this).hasClass("fancybox-overlay")&&!H(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin"),this.scrollV=i.scrollTop(),this.scrollH=i.scrollLeft(),this.el.addClass("fancybox-lock"),i.scrollTop(this.scrollV).scrollLeft(this.scrollH)),this.open(e)},onUpdate:function(){this.fixed||this.update()},afterClose:function(e){this.overlay&&!I.coming&&this.overlay.fadeOut(e.speedOut,H.proxy(this.close,this))}},I.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(e){var t,n,i=I.current,o=i.title,a=e.type;if(H.isFunction(o)&&(o=o.call(i.element,i)),u(o)&&""!==H.trim(o)){switch(t=H('<div class="fancybox-title fancybox-title-'+a+'-wrap">'+o+"</div>"),a){case"inside":n=I.skin;break;case"outside":n=I.wrap;break;case"over":n=I.inner;break;default:n=I.skin,t.appendTo("body"),r&&t.width(t.width()),t.wrapInner('<span class="child"></span>'),I.current.margin[2]+=Math.abs(P(t.css("margin-bottom")))}t["top"===e.position?"prependTo":"appendTo"](n)}}},H.fn.fancybox=function(a){function e(e){var t,n,i=H(this).blur(),o=r;e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||i.is(".fancybox-wrap")||(t=a.groupAttr||"data-fancybox-group",(n=i.attr(t))||(t="rel",n=i.get(0)[t]),n&&""!==n&&"nofollow"!==n&&(o=(i=(i=s.length?H(s):l).filter("["+t+'="'+n+'"]')).index(this)),a.index=o,!1!==I.open(i,a)&&e.preventDefault())}var r,l=H(this),s=this.selector||"";return r=(a=a||{}).index||0,s&&!1!==a.live?c.undelegate(s,"click.fb-start").delegate(s+":not('.fancybox-item, .fancybox-nav')","click.fb-start",e):l.unbind("click.fb-start").bind("click.fb-start",e),this.filter("[data-fancybox-start=1]").trigger("click"),this},c.ready(function(){var e,t,n,i;H.scrollbarWidth===f&&(H.scrollbarWidth=function(){var e=H('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),t=e.children(),n=t.innerWidth()-t.height(99).innerWidth();return e.remove(),n}),H.support.fixedPosition===f&&(H.support.fixedPosition=(n=H('<div style="position:fixed;top:20px;"></div>').appendTo("body"),i=20===n[0].offsetTop||15===n[0].offsetTop,n.remove(),i)),H.extend(I.defaults,{scrollbarWidth:H.scrollbarWidth(),fixed:H.support.fixedPosition,parent:H("body")}),e=H(o).width(),a.addClass("fancybox-lock-test"),t=H(o).width(),a.removeClass("fancybox-lock-test"),H("<style type='text/css'>.fancybox-margin{margin-right:"+(t-e)+"px;}</style>").appendTo("head")})}(window,document,jQuery);